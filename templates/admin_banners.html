{% extends 'base.html' %}
{% block title %}Admin - Banners{% endblock %}
{% block content %}
<style>
  /* ===== ADMIN BANNERS PAGE ===== */

body{
    background:#0b0b0b;
    color:#ffffff;
    font-family:'Segoe UI',sans-serif;
}

/* Page titles */
h1{
    text-align:center;
    margin:30px 0 10px;
    color:#f5f200;
    letter-spacing:2px;
}

h2{
    margin:40px auto 18px;
    text-align:center;
    color:#ffffff;
    font-weight:700;
}

/* Form container */
form{
    max-width:560px;
    margin:0 auto 30px;
    background:#111111;
    padding:30px;
    border-radius:16px;
    box-shadow:0 10px 30px rgba(0,0,0,0.55);
}

/* Labels */
form label{
    display:block;
    margin-bottom:16px;
    font-size:14px;
    font-weight:600;
    color:#cccccc;
}

/* Inputs */
form input[type="text"],
form input[type="file"]{
    width:100%;
    margin-top:6px;
    padding:12px 14px;
    border-radius:8px;
    border:1px solid #333;
    background:#0b0b0b;
    color:#ffffff;
    font-size:14px;
    outline:none;
}

/* Focus */
form input:focus{
    border-color:#f5f200;
    box-shadow:0 0 0 2px rgba(245,242,0,0.15);
}

/* Preview image */
#banner-preview{
    border:1px dashed #444;
    background:#0b0b0b;
}

/* Submit button */
form button{
    width:100%;
    margin-top:12px;
    padding:14px;
    border-radius:30px;
    border:none;
    background:#f5f200;
    color:#000000;
    font-size:16px;
    font-weight:700;
    cursor:pointer;
    transition:0.3s;
}

/* Button hover */
form button:hover{
    background:#e6dc00;
    transform:translateY(-2px);
    box-shadow:0 8px 18px rgba(0,0,0,0.35);
}

/* View site button */
.btn-main{
    display:inline-block;
    margin:0 auto;
    background:#f5f200;
    color:#000;
    padding:12px 28px;
    border-radius:30px;
    font-weight:700;
    text-decoration:none;
    transition:0.3s;
}

.btn-main:hover{
    background:#e6dc00;
}

/* Existing banners list */
.admin-list{
    max-width:900px;
    margin:20px auto 80px;
    padding:0;
    list-style:none;
}

/* Banner row */
.admin-list li{
    display:flex;
    align-items:center;
    gap:18px;
    background:#111111;
    padding:16px 18px;
    border-radius:14px;
    margin-bottom:14px;
    box-shadow:0 6px 20px rgba(0,0,0,0.4);
}

/* Thumbnail */
.admin-list .thumb{
    width:140px;
    height:80px;
    object-fit:cover;
    border-radius:10px;
    border:1px solid #333;
}

/* Banner title */
.admin-list strong{
    flex:1;
    color:#ffffff;
    font-size:15px;
}

/* Delete button */
button.danger{
    background:#ff3b3b;
    color:#ffffff;
    border:none;
    padding:10px 18px;
    border-radius:20px;
    font-weight:700;
    cursor:pointer;
    transition:0.3s;
}

/* Delete hover */
button.danger:hover{
    background:#e12828;
    box-shadow:0 6px 16px rgba(0,0,0,0.35);
}

/* Responsive */
@media(max-width:700px){
    .admin-list li{
        flex-direction:column;
        align-items:flex-start;
    }

    .admin-list .thumb{
        width:100%;
        height:160px;
    }

    form{
        margin:20px;
        padding:24px;
    }
}

</style>
<h1>Manage Banners</h1>
<form action="{{ url_for('admin_banners') }}" method="post" enctype="multipart/form-data">
  <label>Title: <input type="text" name="title"></label>
  <label>Link: <input type="text" name="link"></label>
  <label>CTA: <input type="text" name="cta_text"></label>
  <label>Image: <input id="banner-file" type="file" name="image" accept="image/*"></label>
  <div style="margin:12px 0">
    <img id="banner-preview" src="{{ url_for('static', filename='no_image.png') }}" alt="preview" style="max-width:100%;height:160px;object-fit:cover;border-radius:8px;display:block">
  </div>
  <button type="submit">Upload Banner</button>
</form>

<div style="margin-top:8px">
  <a class="btn-main" href="{{ url_for('landing') }}">View site</a>
</div>

<h2>Existing Banners</h2>
<ul class="admin-list">
  {% for b in banners %}
    <li>
      <img src="{{ b.image_url }}" alt="banner" class="thumb">
      <strong>{{ b.title or 'No title' }}</strong>
      <form action="{{ url_for('admin_delete_banner', banner_id=b._id) }}" method="post" style="display:inline">
        <button type="submit" class="danger">Delete</button>
      </form>
    </li>
  {% endfor %}
</ul>
<script>
  const fileInput = document.getElementById('banner-file');
  const preview = document.getElementById('banner-preview');
  if (fileInput) {
    fileInput.addEventListener('change', (e) => {
      const f = e.target.files[0];
      if (!f) return;
      const url = URL.createObjectURL(f);
      preview.src = url;
    });
  }
</script>
{% endblock %}